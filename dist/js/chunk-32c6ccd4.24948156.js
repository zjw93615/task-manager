(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32c6ccd4"],{"5ef6":function(t,e,s){},"80a0":function(t,e,s){},"8ca3":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list-container",attrs:{id:"data-list-list-view"}},[s("data-view-sidebar",{attrs:{isSidebarActive:t.addNewDataSidebar,data:t.sidebarData},on:{closeSidebar:t.toggleDataSidebar}}),s("vs-table",{ref:"table",attrs:{multiple:"",pagination:"","max-items":t.itemsPerPage,search:"",data:t.projects},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return[s("tbody",t._l(a,(function(e,a){return s("vs-tr",{key:a,attrs:{data:e}},[s("vs-td",[s("p",{staticClass:"project-name font-medium truncate"},[t._v(t._s(e.title))])]),s("vs-td",[s("p",{staticClass:"project-description"},[t._v(t._s(t._f("title")(e.description)))])]),s("vs-td",[s("vs-chip",{staticClass:"project-status",attrs:{color:t.getOrderStatusColor(e.isCompleted)}},[t._v(t._s(e.isCompleted?"完成":"未完成"))])],1),s("vs-td",{staticClass:"whitespace-no-wrap"},[s("feather-icon",{attrs:{icon:"EditIcon",svgClasses:"w-5 h-5 hover:text-primary stroke-current"},on:{click:function(s){return s.stopPropagation(),t.editData(e)}}}),s("feather-icon",{staticClass:"ml-2",attrs:{icon:"TrashIcon",svgClasses:"w-5 h-5 hover:text-danger stroke-current"},on:{click:function(s){return s.stopPropagation(),t.deleteData(e._id)}}})],1)],1)})),1)]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[s("div",{staticClass:"flex flex-wrap-reverse items-center flex-grow justify-between",attrs:{slot:"header"},slot:"header"},[s("div",{staticClass:"flex flex-wrap-reverse items-center data-list-btn-container"},[s("div",{staticClass:"btn-add-new p-3 mb-4 mr-4 rounded-lg cursor-pointer flex items-center justify-center text-lg font-medium text-base text-primary border border-solid border-primary",on:{click:t.addNewData}},[s("feather-icon",{attrs:{icon:"PlusIcon",svgClasses:"h-4 w-4"}}),s("span",{staticClass:"ml-2 text-base text-primary"},[t._v("添加新项目")])],1)]),s("vs-dropdown",{staticClass:"cursor-pointer mb-4 mr-4 items-per-page-handler",attrs:{"vs-trigger-click":""}},[s("div",{staticClass:"p-4 border border-solid d-theme-border-grey-light rounded-full d-theme-dark-bg cursor-pointer flex items-center justify-between font-medium"},[s("span",{staticClass:"mr-2"},[t._v(t._s(t.currentPage*t.itemsPerPage-(t.itemsPerPage-1))+" - "+t._s(t.projects.length-t.currentPage*t.itemsPerPage>0?t.currentPage*t.itemsPerPage:t.projects.length)+" of "+t._s(t.queriedItems))]),s("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),s("vs-dropdown-menu",[s("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=4}}},[s("span",[t._v("4")])]),s("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=10}}},[s("span",[t._v("10")])]),s("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=15}}},[s("span",[t._v("15")])]),s("vs-dropdown-item",{on:{click:function(e){t.itemsPerPage=20}}},[s("span",[t._v("20")])])],1)],1)],1),s("template",{slot:"thead"},[s("vs-th",{attrs:{"sort-key":"title"}},[t._v("名字")]),s("vs-th",{attrs:{"sort-key":"description"}},[t._v("描述")]),s("vs-th",{attrs:{"sort-key":"isCompleted"}},[t._v("进度")]),s("vs-th",[t._v("操作")])],1)],2)],1)},r=[],i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("vs-sidebar",{staticClass:"add-new-data-sidebar items-no-padding",attrs:{"click-not-close":"","position-right":"",parent:"body","default-index":"1",color:"primary",spacer:""},model:{value:t.isSidebarActiveLocal,callback:function(e){t.isSidebarActiveLocal=e},expression:"isSidebarActiveLocal"}},[s("div",{staticClass:"mt-6 flex items-center justify-between px-6"},[s("h4",[t._v(t._s(0===Object.entries(this.data).length?"添加新":"更新")+"项目")]),s("feather-icon",{staticClass:"cursor-pointer",attrs:{icon:"XIcon"},on:{click:function(e){e.stopPropagation(),t.isSidebarActiveLocal=!1}}})],1),s("vs-divider",{staticClass:"mb-0"}),s(t.scrollbarTag,{key:t.$vs.rtl,tag:"component",staticClass:"scroll-area--data-list-add-new",attrs:{settings:t.settings}},[s("div",{staticClass:"p-6"},[s("vs-input",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"mt-5 w-full",attrs:{label:"项目名",name:"item-name"},model:{value:t.dataName,callback:function(e){t.dataName=e},expression:"dataName"}}),s("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("item-name"),expression:"errors.has('item-name')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("item-name")))]),s("vs-input",{staticClass:"mt-5 w-full",attrs:{label:"项目描述",name:"item-description"},model:{value:t.dataDescription,callback:function(e){t.dataDescription=e},expression:"dataDescription"}}),s("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("item-name"),expression:"errors.has('item-name')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("item-description")))]),s("div",{staticClass:"mt-5 w-full"},[s("label",{staticClass:"vs-input--label"},[t._v("项目成员")]),s("v-select",{directives:[{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{multiple:"",closeOnSelect:!1,options:t.memberOptions,name:"members",dir:t.$vs.rtl?"rtl":"ltr"},model:{value:t.project_members,callback:function(e){t.project_members=e},expression:"project_members"}}),s("span",{directives:[{name:"show",rawName:"v-show",value:t.errors.has("role"),expression:"errors.has('role')"}],staticClass:"text-danger text-sm"},[t._v(t._s(t.errors.first("members")))])],1),s("div",{staticClass:"vx-row mt-5 w-full"},[s("label",{staticClass:"vx-col",attrs:{for:"status"}},[t._v("项目状态")]),s("vs-switch",{staticClass:"vx-col ml-auto flex",attrs:{id:"status",color:"success",label:"项目状态"},model:{value:t.dataStatus,callback:function(e){t.dataStatus=e},expression:"dataStatus"}})],1)],1)]),s("div",{staticClass:"flex flex-wrap items-center p-6",attrs:{slot:"footer"},slot:"footer"},[s("vs-button",{staticClass:"mr-6",attrs:{disabled:!t.isFormValid},on:{click:t.submitData}},[t._v("提交")]),s("vs-button",{attrs:{type:"border",color:"danger"},on:{click:function(e){t.isSidebarActiveLocal=!1}}},[t._v("取消")])],1)],1)},o=[],n=(s("ac6a"),s("ffc1"),s("9d63")),c=s.n(n),l=s("4a7a"),d=s.n(l),u={props:{isSidebarActive:{type:Boolean,required:!0},data:{type:Object,default:function(){}}},components:{VuePerfectScrollbar:c.a,vSelect:d.a},data:function(){return{dataId:null,dataName:"",dataDescription:null,dataStatus:!1,project_members:[],settings:{maxScrollbarLength:60,wheelSpeed:.6}}},watch:{isSidebarActive:function(t){if(t)if(console.log(this.data),0===Object.entries(this.data).length)this.initValues(),this.$validator.reset();else{var e=JSON.parse(JSON.stringify(this.data)),s=e._id,a=e.title,r=e.description,i=e.isCompleted,o=e.members;this.dataId=s,this.dataName=a,this.dataDescription=r,this.dataStatus=i,this.project_members=o,this.initValues()}}},computed:{isSidebarActiveLocal:{get:function(){return this.isSidebarActive},set:function(t){t||this.$emit("closeSidebar")}},isFormValid:function(){return!this.errors.any()&&this.dataName},scrollbarTag:function(){return this.$store.getters.scrollbarTag},memberOptions:function(){var t=this.$store.state.user.users,e=[];return t.forEach((function(t){e.push({label:t.displayName,value:t._id})})),e}},methods:{initValues:function(){this.data._id||(this.dataId=null,this.dataName="",this.dataDescription=null,this.dataStatus=!1,this.project_members=[])},submitData:function(){var t=this;this.$validator.validateAll().then((function(e){if(e){var s={_id:t.dataId,title:t.dataName,description:t.dataDescription,isCompleted:t.dataStatus,members:t.project_members};console.log(s),null!==t.dataId?t.$store.dispatch("project/updateProject",s).catch((function(t){console.error(t)})):(delete s._id,t.$store.dispatch("project/addProject",s).catch((function(t){console.error(t)}))),t.$emit("closeSidebar"),t.initValues()}}))}}},m=u,p=(s("eb4d"),s("2877")),v=Object(p["a"])(m,i,o,!1,null,"61526896",null),h=v.exports,f={components:{DataViewSidebar:h},data:function(){return{selected:[],itemsPerPage:4,isMounted:!1,addNewDataSidebar:!1,sidebarData:{}}},computed:{currentPage:function(){return this.isMounted?this.$refs.table.currentx:0},projects:function(){return this.$store.state.project.projects},queriedItems:function(){return this.$refs.table?this.$refs.table.queriedResults.length:this.projects.length}},methods:{addNewData:function(){this.sidebarData={},this.toggleDataSidebar(!0)},deleteData:function(t){console.log(t),this.$store.dispatch("project/removeProject",t).catch((function(t){console.error(t)}))},editData:function(t){this.sidebarData=t,this.toggleDataSidebar(!0)},getOrderStatusColor:function(t){return t?"success":"primary"},toggleDataSidebar:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.addNewDataSidebar=t}},created:function(){this.$store.dispatch("user/fetchUsers"),this.$store.dispatch("project/fetchAllProjects")},mounted:function(){this.isMounted=!0}},b=f,g=(s("d9b0"),Object(p["a"])(b,a,r,!1,null,null,null));e["default"]=g.exports},d9b0:function(t,e,s){"use strict";s("80a0")},eb4d:function(t,e,s){"use strict";s("5ef6")}}]);
//# sourceMappingURL=chunk-32c6ccd4.24948156.js.map